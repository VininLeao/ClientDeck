<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ClientDeck - Gerenciador de Clientes</title>
    <script src="https://cdn.jsdelivr.net/npm/sortablejs@latest/Sortable.min.js"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="header">
        <h1>‚ú® ClientDeck</h1>
        <p>O jeito mais simples e intuitivo de gerenciar seus clientes</p>
    </div>

    <div class="stats">
        <div class="stat-item todo">
            <span class="stat-number" id="todoCount">0</span>
            <span class="stat-label">
                <svg class="stat-icon" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path>
                </svg>
                A Fazer
            </span>
        </div>
        <div class="stat-item progress">
            <span class="stat-number" id="progressCount">0</span>
            <span class="stat-label">
                <svg class="stat-icon" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                </svg>
                Em Andamento
            </span>
        </div>
        <div class="stat-item done">
            <span class="stat-number" id="doneCount">0</span>
            <span class="stat-label">
                <svg class="stat-icon" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                </svg>
                Conclu√≠do
            </span>
        </div>
    </div>

    <div class="search-box">
        <input type="text" id="searchInput" placeholder="üîç Buscar clientes... (digite o nome ou template)">
        <button class="clear-search" onclick="clearSearch()" style="display: none;">√ó</button>
    </div>

    <div class="controls">
        <div class="controls-left">
            <button class="btn" onclick="openNewClientModal()">
                <span>üë§</span> Novo Cliente
            </button>
            
            <div class="dropdown">
                <button class="btn btn-secondary dropdown-btn" id="actionsDropdownBtn" onclick="toggleDropdown('actionsDropdown')">
                    <span>‚öôÔ∏è</span> A√ß√µes <span class="dropdown-arrow">‚ñº</span>
                </button>
                <div id="actionsDropdown" class="dropdown-content">
                    <button class="dropdown-item" onclick="openTemplateModal(); closeDropdown('actionsDropdown')">
                        <span>üìã</span> Templates
                    </button>
                    <button class="dropdown-item" onclick="exportData(); closeDropdown('actionsDropdown')">
                        <span>üì•</span> Exportar
                    </button>
                    <button class="dropdown-item" onclick="document.getElementById('importFile').click(); closeDropdown('actionsDropdown')">
                        <span>üì§</span> Importar
                    </button>
                </div>
            </div>
            <input type="file" id="importFile" accept=".json" style="display: none;" onchange="importData(this)">
        </div>

        <div class="controls-right">
            <span class="filter-label">üìÇ Filtrar:</span>
            <select class="filter-dropdown" id="templateFilter" onchange="filterByTemplate(this.value)">
                <option value="all">Todos os Templates</option>
            </select>
            
            <button class="btn btn-secondary" id="tableToggleBtn" onclick="toggleTableView()">
                <span>üìä</span> Mostrar Planilha
            </button>
        </div>
    </div>

    <div class="keyboard-shortcut">
        üí° Dica: Use Alt+N para novo cliente, Escape para fechar modais
    </div>

    <div class="kanban-board" id="kanbanView">
        <div class="column todo" id="todo">
            <h2>üî¥ A Fazer</h2>
        </div>
        <div class="column progress" id="progress">
            <h2>üü° Em Andamento</h2>
        </div>
        <div class="column done" id="done">
            <h2>üü¢ Conclu√≠do</h2>
        </div>
    </div>

    <div class="table-view hidden" id="tableView">
        <table id="clientsTable">
            <thead>
                <tr>
                    <th></th>
                    <th>Nome do Cliente</th>
                    <th>Template</th>
                    <th>Status</th>
                    <th>Progresso</th>
                    <th>Data de In√≠cio</th>
                    <th>Data de Fim</th>
                </tr>
            </thead>
            <tbody id="clientsTableBody">
                </tbody>
        </table>
    </div>

    <div id="newClientModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>üë§ Novo Cliente</h2>
                <span class="close" onclick="closeModal('newClientModal')">&times;</span>
            </div>
            <form id="newClientForm">
                <div class="form-group">
                    <label for="clientName">Nome do Cliente:</label>
                    <input type="text" id="clientName" placeholder="Digite o nome do cliente" required>
                </div>
                <div class="form-group">
                    <label>Selecione um Template:</label>
                    <div class="templates-list" id="templatesList">
                        </div>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn btn-ghost" onclick="closeModal('newClientModal')">
                        Cancelar
                    </button>
                    <button type="submit" class="btn">
                        <span>‚úÖ</span> Criar Cliente
                    </button>
                </div>
            </form>
        </div>
    </div>

    <div id="templateModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>‚öôÔ∏è Gerenciar Templates</h2>
                <span class="close" onclick="closeModal('templateModal')">&times;</span>
            </div>
            
            <div class="tab-container">
                <div class="tab-buttons">
                    <button class="tab-button active" onclick="switchTab('myTemplates')">Meus Templates</button>
                    <button class="tab-button" onclick="switchTab('templateEditor')">Editor de Template</button>
                </div>

                <div id="myTemplates" class="tab-content active">
                    <div class="templates-list">
                        <div id="existingTemplates">
                            </div>
                    </div>
                </div>

                <div id="templateEditor" class="tab-content">
                    <div class="template-builder">
                        <h3 id="editorTitle">‚ûï Criar Novo Template</h3>
                        <div class="form-group">
                            <label for="templateName">Nome do Template:</label>
                            <input type="text" id="templateName" placeholder="Ex: Onboarding Shopify">
                        </div>
                        <div class="form-group">
                            <label>Perguntas do Checklist:</label>
                            <div class="template-items-container">
                                <div id="templateItems">
                                    <div class="template-question-block">
                                        <button type="button" class="template-remove-btn" onclick="removeTemplateItem(this)">üóëÔ∏è</button>
                                        <div class="template-item">
                                            <input type="text" placeholder="Digite uma pergunta..." required>
                                            <select onchange="handleTypeChange(this)">
                                                <option value="checkbox">Sim/N√£o</option>
                                                <option value="text">Texto</option>
                                                <option value="textarea">Texto Longo</option>
                                                <option value="date">Data</option>
                                                <option value="number">N√∫mero</option>
                                                <option value="url">Link</option>
                                                <option value="select">Lista de Op√ß√µes</option>
                                                <option value="observacoes">Campo de Observa√ß√µes</option>
                                            </select>
                                        </div>
                                        <div class="template-item-controls">
                                            <div class="required-checkbox">
                                                <input type="checkbox" id="req-new-0">
                                                <label for="req-new-0">Obrigat√≥rio</label>
                                            </div>
                                            <div class="drag-handle">‚†ø</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <button type="button" class="btn btn-secondary btn-small" onclick="addTemplateItem()">
                                ‚ûï Adicionar Pergunta
                            </button>
                        </div>
                        <div style="display: flex; gap: 12px;">
                            <button type="button" class="btn" onclick="saveTemplate()">
                                <span>üíæ</span> Salvar Template
                            </button>
                            <button type="button" class="btn btn-ghost" onclick="cancelTemplateEdit()">
                                Cancelar
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="modal-actions" id="templateModalActions">
                <button type="button" class="btn btn-secondary" onclick="closeModal('templateModal')">
                    Fechar
                </button>
            </div>
        </div>
    </div>

    <div id="checklistModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="checklistTitle">Checklist do Cliente</h2>
                <span class="close" onclick="closeModal('checklistModal')">&times;</span>
            </div>
            <div id="checklistContent"></div>
            <div class="modal-actions">
                <button class="btn btn-secondary" onclick="duplicateClient()">
                    <span>üìã</span> Duplicar
                </button>
                <button class="btn btn-danger" onclick="deleteClient()">
                    <span>üóëÔ∏è</span> Excluir
                </button>
                <button class="btn btn-secondary" onclick="closeModal('checklistModal')">
                    Fechar
                </button>
            </div>
        </div>
    </div>

    <div id="toast" class="toast"></div>

    <footer class="footer">
        Desenvolvido por <a href="https://github.com/vininleao" target="_blank">Vin√≠cius Le√£o</a>
    </footer>

    <script src="script.js"></script>
</body>
</html>